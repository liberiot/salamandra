'use strict';var _parser=require('./src/mqtt/parser');var _parser2=_interopRequireDefault(_parser);var _liberiot=require('./src/liberiot');var _liberiot2=_interopRequireDefault(_liberiot);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var expect=require('chai').expect;//  (462F)1700270012703347000100010000030342
var STRING_TO_PARSE='(412F)17002700127033470001000103000704E102B1022404';var STRING_WITHOUT_MESURES='(412F)1700270012703347000100010200030243';var STRING_WITH_BAD_CRC='(412F)17002700127033470001000103000704E102B1022407';var PARSED_STRING={uid:{full:'170027001270334700010001',id:'1700270012703347',code:'00010001'},rr:65,ll:47,cn:3,fnc:0,reg:7,measures:[{value:1.25,endpoint:'Voltage',type:'V',error:false},{value:18.9,endpoint:'Temperature',type:'C',error:false},{value:66.02,endpoint:'Temperature',type:'F',error:false},{value:292.05,endpoint:'Temperature',type:'K',error:false},{value:54.8,endpoint:'Humidity',type:'%',error:false}]};var PARSED_STRING_WITHOUT_MEASURES={uid:{full:'170027001270334700010001',id:'1700270012703347',code:'00010001'},rr:65,ll:47,cn:2,fnc:0,reg:3,measures:[]};describe('The parser module',function(){it('parse correctly the string '+STRING_TO_PARSE,function(){var a=(0,_parser2.default)(STRING_TO_PARSE);expect(a).to.be.eql(PARSED_STRING)});it('parse correctly the string '+STRING_WITHOUT_MESURES,function(){var a=(0,_parser2.default)(STRING_WITHOUT_MESURES);expect(a).to.be.eql(PARSED_STRING_WITHOUT_MEASURES)});it('check crc correctly',function(){var a=STRING_TO_PARSE.slice(6,STRING_TO_PARSE.length-2);var b=(0,_parser.getCrc)(STRING_TO_PARSE);var c=(0,_parser.checkCrc)(a,b);expect(c).to.be.true});it('check crc incorrectly',function(){var a=STRING_WITH_BAD_CRC.slice(6,STRING_WITH_BAD_CRC.length-2);var b=(0,_parser.getCrc)(STRING_WITH_BAD_CRC);var c=(0,_parser.checkCrc)(a,b);expect(c).to.be.false})});describe('The Liberiot class',function(){it('get mac correctly',function(){var a=new _liberiot2.default;return a.getMac().then(function(b){expect(b).to.have.length(12)})})});